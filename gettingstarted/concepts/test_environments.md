## Defining Test Environments
It is likely you will run your tests against multiple environments and/or different browsers. Nightwatch provides a concept for defining different _environments_, in which you can set specific test settings.

The environments are located under the `"test_settings"` dictionary in the configuration file. A `default` environment is always required from which the other environments inherit the settings. You can overwrite any test setting for each environment as needed. 

The configuration file which is auto-generated by Nightwatch (`nightwatch.conf.js`) contains several pre-defined test environments for running tests against several different browsers (Firefox, Chrome, Safari), and also for running tests using Selenium Server or popular cloud testing provider Browserstack.com.  

Hereâ€™s an extract:

<div class="sample-test">
<pre><code class="language-javascript">module.exports = {
  src_folders: [],
  
  test_settings: {
    default: {
      launch_url: 'https://nightwatchjs.org'
    },
    
    safari: {
      desiredCapabilities : {
        browserName : 'safari',
        alwaysMatch: {
          acceptInsecureCerts: false
        }
      },
      webdriver: {
        port: 4445,
        start_process: true,
        server_path: '/usr/bin/safaridriver'
      }
    },
    
    firefox: {
      desiredCapabilities : {
        browserName : 'firefox'
      },
      
      webdriver: {
        start_process: true,
        port: 4444,
        server_path: require('geckodriver').path
      }
    }
  }
}</code></pre></div>

Considering this setup, to run tests, for instance, against Safari, we would run the following the command-line:

<pre><code class="language-bash">nightwatch --env safari</code></pre>

Refer to the [Running Tests][1] documentation section to learn more about how to user the Nightwatch test runner.

### Extending Test Environments

In some cases, you will need to extend another environment which is not the `default` one. A common scenario for this use case is the situation when you are using the Selenium Server or a cloud-based testing service (such as [Sauce Labs][2] or [Browserstack][3]). 

In this case you will need most likely need a base environment for common settings (such as `host` or `port`) and several sub-environments for each target browser (e.g. Firefox, Chrome). 

Going back to the auto-generated configuration file, `nightwatch.conf.js`, we have provided an example structure for using the Selenium Server with Chrome and Firefox.  

Here's the relevant extract. Notice the "`extends`" property:

<div class="sample-test">
<pre><code class="language-javascript">module.exports = {
  src_folders: [],
  
  test_settings: {
    default: {
      launch_url: 'https://nightwatchjs.org'
    },
    
    selenium: {
      // Selenium Server is running locally and is managed by Nightwatch
      selenium: {
        start_process: true,
        port: 4444,
        server_path: require('selenium-server').path,
        cli_args: {
          'webdriver.gecko.driver': require('geckodriver').path,
          'webdriver.chrome.driver': require('chromedriver').path
        }
      },
      webdriver: {
        start_process: false
      }
    },
    
    'selenium.chrome': {
      extends: 'selenium',
      desiredCapabilities: {
        browserName: 'chrome',
        chromeOptions : {
          w3c: false
        }
      }
    },

    'selenium.firefox': {
      extends: 'selenium',
      desiredCapabilities: {
        browserName: 'firefox'
      }
    }
  }
}</code></pre></div>

With this setup, you can run the tests using Selenium Server and Firefox with this command:

<pre><code class="language-bash">nightwatch --env selenium.firefox</code></pre>

[1]:	/guide/running-tests/
[2]:	https://saucelabs.com
[3]:	https://browserstack.com
